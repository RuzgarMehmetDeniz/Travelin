@using Project3Travelin.Dtos.TourDtos
@using Project3Travelin.Dtos.CategoryDtos
@{
    Layout = null;
    var tours = ViewBag.Tours as List<ResultTourDto> ?? new List<ResultTourDto>();
    var categories = ViewBag.Categories as List<ResultCategoryDto> ?? new List<ResultCategoryDto>();
}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr">
    @await Component.InvokeAsync("_TourHeadComponentPartial")
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div id="status"></div>
    </div>

    <!-- header starts -->
    @await Component.InvokeAsync("_TourHeaderComponentPartial")
    <!-- header ends -->

    <div class="tet"></div>

    <!-- banner starts -->
    <section class="banner pt-10 pb-0 overflow-hidden" style="background-image: url(/travelin/images/testimonial.png)">
        <div class="container">
            <div class="banner-in">
                <div class="row align-items-center">
                    <div class="col-lg-6 mb-4">
                        <div class="banner-content text-lg-start text-center">
                            <h4 class="theme mb-0">Dünyayı Keşfet</h4>
                            <h1>Hayalinizdeki Tura Çıkmaya Başlayın!</h1>
                            <p class="mb-4">Unutulmaz anılar yaratın, yeni kültürler keşfedin ve dünyanın dört bir yanındaki muhteşem destinasyonları ziyaret edin.</p>
                            <div class="book-form">
                                <div class="row d-flex align-items-center justify-content-between">
                                    <div class="col-lg-6 mb-2">
                                        <div class="form-group">
                                            <div class="input-box">
                                                <select class="niceSelect">
                                                    <option value="">Destinasyon Seçin</option>
                                                    @foreach (var tour in tours)
                                                    {
                                                        <option value="@tour.TourId">@tour.Country - @tour.City</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-2">
                                        <div class="form-group">
                                            <div class="input-box">
                                                <input type="date" name="date" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-2">
                                        <div class="form-group">
                                            <div class="input-box">
                                                <select class="niceSelect">
                                                    <option value="">Kategori Seçin</option>
                                                    @foreach (var cat in categories)
                                                    {
                                                        <option value="@cat.CategoryId">@cat.CategoryName</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-2">
                                        <div class="form-group">
                                            <div class="input-box">
                                                <select class="niceSelect">
                                                    <option value="">Tur Süresi</option>
                                                    <option value="3">3 Gün</option>
                                                    <option value="5">5 Gün</option>
                                                    <option value="7">7 Gün</option>
                                                    <option value="10">10 Gün</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group mb-0 text-center">
                                            <a href="#tours" class="nir-btn w-100"><i class="fa fa-search mr-2"></i> Tur Ara</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4">
                        <div class="banner-image">
                            <img src="/travelin/images/travel.png" alt="" />
                        </div>
                    </div>
                </div>

                <!-- Kategoriler -->
                <div class="category-main-inner border-t pt-1">
                    <div class="row side-slider">
                        @if (categories.Any())
                        {
                            @foreach (var cat in categories)
                            {
                                <div class="col-lg-3 col-md-6 my-4">
                                    <div class="category-item box-shadow p-3 py-4 text-center bg-white rounded overflow-hidden">
                                        <div class="trending-topic-content">
                                            @if (!string.IsNullOrWhiteSpace(cat.IconUrl))
                                            {
                                                <img src="@cat.IconUrl" class="mb-1 d-inline-block" alt="@cat.CategoryName" style="width:48px;height:48px;object-fit:contain;" />
                                            }
                                            else
                                            {
                                                <i class="icon-grid fs-1 theme mb-1 d-block"></i>
                                            }
                                            <h4 class="mb-0"><a href="#">@cat.CategoryName</a></h4>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                        else
                        {
                            <!-- Fallback statik kategoriler -->
                            <div class="col-lg-3 col-md-6 my-4">
                                <div class="category-item box-shadow p-3 py-4 text-center bg-white rounded overflow-hidden">
                                    <div class="trending-topic-content">
                                        <img src="/travelin/images/icons/004-camping-tent.png" class="mb-1 d-inline-block" alt="" />
                                        <h4 class="mb-0"><a href="#">Camping</a></h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 my-4">
                                <div class="category-item box-shadow p-3 py-4 text-center bg-white rounded overflow-hidden">
                                    <div class="trending-topic-content">
                                        <img src="/travelin/images/icons/003-hiking.png" class="mb-1 d-inline-block" alt="" />
                                        <h4 class="mb-0"><a href="#">Hiking</a></h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 my-4">
                                <div class="category-item box-shadow p-3 py-4 text-center bg-white rounded overflow-hidden">
                                    <div class="trending-topic-content">
                                        <img src="/travelin/images/icons/005-sunbed.png" class="mb-1 d-inline-block" alt="" />
                                        <h4 class="mb-0"><a href="#">Beach Tours</a></h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 my-4">
                                <div class="category-item box-shadow p-3 py-4 text-center bg-white rounded overflow-hidden">
                                    <div class="trending-topic-content">
                                        <img src="/travelin/images/icons/006-surf.png" class="mb-1 d-inline-block" alt="" />
                                        <h4 class="mb-0"><a href="#">Surfing</a></h4>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- banner ends -->
    <!-- 3 Adım -->
    <section class="about-us pb-6 pt-6" style="background-image: url(/travelin/images/shape4.png); background-position: center">
        <div class="container">
            <div class="section-title mb-6 w-50 mx-auto text-center">
                <h4 class="mb-1 theme1">Mükemmel Turun 3 Adımı</h4>
                <h2 class="mb-1">Seyahat <span class="theme">Mükemmelliğini Bul</span></h2>
                <p>Hayalinizdeki tatili planlamak için sadece birkaç adım yeterli.</p>
            </div>
            <div class="why-us">
                <div class="why-us-box">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                            <div class="why-us-item text-center p-4 py-5 border rounded bg-white">
                                <div class="why-us-content">
                                    <div class="why-us-icon"><i class="icon-flag theme"></i></div>
                                    <h4><a href="#">Ne Yapmak İstediğinizi Söyleyin</a></h4>
                                    <p class="mb-0">Seyahat planınızı ve beklentilerinizi bizimle paylaşın.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                            <div class="why-us-item text-center p-4 py-5 border rounded bg-white">
                                <div class="why-us-content">
                                    <div class="why-us-icon"><i class="icon-location-pin theme"></i></div>
                                    <h4><a href="#">Seyahat Lokasyonunuzu Paylaşın</a></h4>
                                    <p class="mb-0">Gitmek istediğiniz destinasyonları belirleyin.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                            <div class="why-us-item text-center p-4 py-5 border rounded bg-white">
                                <div class="why-us-content">
                                    <div class="why-us-icon"><i class="icon-directions theme"></i></div>
                                    <h4><a href="#">Tercihlerinizi Paylaşın</a></h4>
                                    <p class="mb-0">Konaklama ve aktivite tercihlerinizi belirtin.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                            <div class="why-us-item text-center p-4 py-5 border rounded bg-white">
                                <div class="why-us-content">
                                    <div class="why-us-icon"><i class="icon-compass theme"></i></div>
                                    <h4><a href="#">%100 Güvenilir Tur Acentesi</a></h4>
                                    <p class="mb-0">Yılların deneyimiyle güvenli seyahat garantisi.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="white-overlay"></div>
    </section>

    <!-- En İyi Tur Paketleri -->
    <section class="trending pb-0" id="tours">
        <div class="container">
            <div class="row align-items-center justify-content-between mb-6">
                <div class="col-lg-7">
                    <div class="section-title text-center text-lg-start">
                        <h4 class="mb-1 theme1">Öne Çıkanlar</h4>
                        <h2 class="mb-1">En İyi <span class="theme">Tur Paketleri</span></h2>
                        <p>Özenle seçilmiş en popüler tur paketlerimizi keşfedin.</p>
                    </div>
                </div>
            </div>
            <div class="trend-box">
                <div class="row item-slider">
                    @if (tours.Any())
                    {
                        @foreach (var tour in tours)
                        {
                            <div class="col-lg-4 col-md-6 col-sm-6 mb-4">
                                <div class="trend-item rounded box-shadow">
                                    <div class="trend-image position-relative">
                                        @if (!string.IsNullOrWhiteSpace(tour.ImageUrl))
                                        {
                                            <img src="@tour.ImageUrl" alt="@tour.Title" style="width:100%;height:220px;object-fit:cover;" />
                                        }
                                        else
                                        {
                                            <img src="/travelin/images/trending/trending1.jpg" alt="@tour.Title" style="width:100%;height:220px;object-fit:cover;" />
                                        }
                                        <div class="color-overlay"></div>
                                    </div>
                                    <div class="trend-content p-4 pt-5 position-relative">
                                        <div class="trend-meta bg-theme white px-3 py-2 rounded">
                                            <div class="entry-author">
                                                <i class="icon-calendar"></i>
                                                <span class="fw-bold"> @tour.DayNight</span>
                                            </div>
                                        </div>
                                        <h5 class="theme mb-1">
                                            <i class="flaticon-location-pin"></i> @tour.Country
                                        </h5>
                                        <h3 class="mb-1"><a href="#">@tour.Title</a></h3>
                                        <div class="rating-main d-flex align-items-center pb-2">
                                            <div class="rating">
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star checked"></span>
                                                <span class="fa fa-star checked"></span>
                                            </div>
                                        </div>
                                        @if (!string.IsNullOrWhiteSpace(tour.Description))
                                        {
                                            <p class="border-b pb-2 mb-2">
                                                @(tour.Description.Length > 80 ? tour.Description.Substring(0, 80) + "..." : tour.Description)
                                            </p>
                                        }
                                        <div class="entry-meta">
                                            <div class="entry-author d-flex align-items-center justify-content-between">
                                                <p class="mb-0">
                                                    <span class="theme fw-bold fs-5">@tour.Price ₺</span> | Kişi başı
                                                </p>
                                                <a href="#bookingModal_@tour.TourId"
                                                   data-bs-toggle="modal"
                                                   data-bs-target="#bookingModal_@tour.TourId"
                                                   class="nir-btn">Rezervasyon</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Booking Modal for this tour -->
                            <div class="modal fade" id="bookingModal_@tour.TourId" tabindex="-1" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content" style="border-radius:14px;overflow:hidden;">
                                        <div class="modal-header bg-theme">
                                            <h5 class="modal-title white fw-bold">@tour.Title – Rezervasyon</h5>
                                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                                        </div>
                                        <div class="modal-body p-4">
                                            <form asp-controller="Travelin" asp-action="CreateBooking" method="post">
                                                @Html.AntiForgeryToken()
                                                <input type="hidden" name="TourId" value="@tour.TourId" />
                                                <input type="hidden" name="TourTitle" value="@tour.Title" />
                                                <div class="row g-3">
                                                    <div class="col-6">
                                                        <label class="form-label fw-semibold" style="font-size:.8rem;">Ad</label>
                                                        <input type="text" name="Name" class="form-control" placeholder="Adınız" required />
                                                    </div>
                                                    <div class="col-6">
                                                        <label class="form-label fw-semibold" style="font-size:.8rem;">Soyad</label>
                                                        <input type="text" name="Surname" class="form-control" placeholder="Soyadınız" required />
                                                    </div>
                                                    <div class="col-12">
                                                        <label class="form-label fw-semibold" style="font-size:.8rem;">E-posta</label>
                                                        <input type="email" name="Email" class="form-control" placeholder="email@example.com" required />
                                                    </div>
                                                    <div class="col-12">
                                                        <label class="form-label fw-semibold" style="font-size:.8rem;">Telefon</label>
                                                        <input type="tel" name="Phone" class="form-control" placeholder="+90 555 000 00 00" required />
                                                    </div>
                                                    <div class="col-12">
                                                        <label class="form-label fw-semibold" style="font-size:.8rem;">Rezervasyon Tarihi</label>
                                                        <input type="date" name="BookingDate" class="form-control" required />
                                                    </div>
                                                </div>
                                                <div class="mt-4">
                                                    <button type="submit" class="nir-btn w-100">
                                                        <i class="icon-calendar me-2"></i> Rezervasyon Yap
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="col-12 text-center py-5">
                            <i class="icon-map fs-1 theme"></i>
                            <p class="mt-3">Henüz tur eklenmemiş.</p>
                            <a href="/AdminTour/CreateTour" class="nir-btn">Tur Ekle</a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </section>

    <!-- Hakkımızda -->
    <section class="about-us pt-6" style="background-image: url(/travelin/images/bg/bg-trans.png)">
        <div class="container">
            <div class="about-image-box">
                <div class="row d-flex align-items-center justify-content-between">
                    <div class="col-lg-6 mb-4 pe-4">
                        <div class="about-image overflow-hidden">
                            <img src="/travelin/images/travel1.png" alt="" />
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4 ps-4">
                        <div class="about-content text-center text-lg-start mb-4">
                            <h4 class="theme d-inline-block mb-0">Bizi Tanıyın</h4>
                            <h2 class="border-b mb-2 pb-1">Bizimle Dünyanın Her Köşesini Keşfedin.</h2>
                            <p class="border-b mb-2 pb-2">
                                Yıllarca süren deneyimimizle dünyanın dört bir yanında unutulmaz tur paketleri sunuyoruz.
                                Güvenilir rehberlerimiz ve özenle hazırlanmış programlarımızla her seyahat bir maceraya dönüşür.
                            </p>
                            <div class="about-listing">
                                <ul class="d-flex justify-content-between">
                                    <li><i class="icon-location-pin theme"></i> Tur Rehberi</li>
                                    <li><i class="icon-briefcase theme"></i> Uygun Fiyat</li>
                                    <li><i class="icon-folder theme"></i> Güvenilir Paket</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="counter-main w-75 float-end">
                            <div class="counter p-4 pb-0 box-shadow bg-white rounded">
                                <div class="row">
                                    <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                                        <div class="counter-item border-end pe-4">
                                            <div class="counter-content">
                                                <h2 class="value mb-0 theme">20</h2>
                                                <span class="m-0">Yıllık Deneyim</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                                        <div class="counter-item border-end pe-4">
                                            <div class="counter-content">
                                                <h2 class="value mb-0 theme">@tours.Count</h2>
                                                <span class="m-0">Tur Paketi</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                                        <div class="counter-item border-end pe-4">
                                            <div class="counter-content">
                                                <h2 class="value mb-0 theme">850</h2>
                                                <span class="m-0">Mutlu Müşteri</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                                        <div class="counter-item">
                                            <div class="counter-content">
                                                <h2 class="value mb-0 theme">@categories.Count</h2>
                                                <span class="m-0">Kategori</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="white-overlay"></div>
    </section>

    <!-- Booking Success Alert -->
    @if (TempData["BookingSuccess"] != null)
    {
        <div class="container mt-4">
            <div class="alert alert-success alert-dismissible fade show" role="alert" style="border-radius:10px;">
                <i class="fa fa-check-circle me-2"></i> <strong>Rezervasyonunuz alındı!</strong> En kısa sürede sizinle iletişime geçeceğiz.
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        </div>
    }

    <!-- Partner -->
    <div class="our-partner p-0">
        <div class="container">
            <div class="partners_inner">
                <ul>
                    <li><img src="/travelin/images/cl-5.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-2.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-3.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-4.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-5.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-3.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-2.png" alt="" /></li>
                    <li><img src="/travelin/images/cl-1.png" alt="" /></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    @await Component.InvokeAsync("_TourFooterCompoentPartial")


    <!-- Back to top -->
    <div id="back-to-top"><a href="#"></a></div>

    @await Component.InvokeAsync("_TourScriptsCompoentPartial")

</body>
</html>